<!DOCTYPE html>
<html lang="pt-br" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - PlayU</title>
    <script src="assets/js/version.5732ff61.js"></script>
    <script>
        function loadAsset(path) {
            const version = typeof SITE_VERSION !== 'undefined' ? SITE_VERSION : new Date().getTime();
            const extension = path.split('.').pop();
            if (extension === 'css') {
                document.write(`<link rel="stylesheet" href="${path}?v=${version}">`);
            } else if (extension === 'js') {
                document.write(`<script src="${path}?v=${version}" defer><\/script>`);
            }
        }
    </script>
</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <h1 class="logo">Painel Admin</h1>
            <div class="user-menu">
                <span id="user-greeting">Olá, Admin</span>
                <a href="index.html" class="submit-btn small-btn">Voltar para Início</a>
                <button id="logout-btn" class="submit-btn small-btn danger-btn">Sair</button>
            </div>
        </div>
        
        <div class="container dashboard-tabs" style="margin-top: 1rem; border-bottom: none;">
            <button class="tab-btn" onclick="switchAdminTab('user-management')">Usuários</button>
            <button class="tab-btn active" onclick="switchAdminTab('game-management')">Jogos</button>
            <button class="tab-btn" onclick="switchAdminTab('content-management')">Conteúdo</button>
            <button class="tab-btn" onclick="switchAdminTab('course-management')">Cursos</button>
        </div>
    </header>

    <main class="dashboard-main">
        
        <section id="user-management" class="dashboard-section hidden-section">
            <div class="section-header">
                <h2>Gerenciamento de Usuários</h2>
                <div class="search-box">
                    <ion-icon name="search-outline"></ion-icon>
                    <input type="text" id="user-search-input" placeholder="Buscar...">
                </div>
            </div>
            <div class="table-container">
                <table class="admin-table">
                    <thead><tr><th>Nome</th><th>Email</th><th>Cargo</th><th>Ações</th></tr></thead>
                    <tbody id="user-table-body"><tr><td colspan="4"><div class="loader"></div></td></tr></tbody>
                </table>
            </div>
        </section>

        <section id="game-management" class="dashboard-section">
            <div class="section-header">
                <h2>Gerenciamento de Jogos</h2>
                <button id="open-create-game-modal-btn" class="submit-btn"><ion-icon name="add-circle-outline"></ion-icon> Novo Jogo</button>
            </div>
            <div id="game-list-container" class="games-grid"></div>
        </section>

        <section id="content-management" class="dashboard-section hidden-section">
            <div class="section-header">
                <h2>Gerenciamento de Conteúdo</h2>
                <div class="content-tabs">
                    <button class="tab-btn active" data-target="edit-faq">FAQ</button>
                    <button class="tab-btn" data-target="edit-about">Sobre</button>
                </div>
            </div>
            <div id="edit-faq" class="content-sub-section active-section">
                <div id="faq-list-admin" class="bookings-list"></div>
                <button id="add-faq-btn" class="submit-btn" style="margin-top: 1rem;">Nova Pergunta</button>
            </div>
            <div id="edit-about" class="content-sub-section hidden-section">
                <form id="about-form">
                    <div class="form-group"><label>História</label><textarea id="about-history" rows="10"></textarea></div>
                    <button type="submit" class="submit-btn">Salvar</button>
                </form>
            </div>
        </section>

        <section id="course-management" class="dashboard-section hidden-section">
            <div class="section-header">
                <h2>Cursos Online</h2>
                <button id="add-course-btn" class="submit-btn"><ion-icon name="school-outline"></ion-icon> Criar Curso</button>
            </div>
            <div id="course-list-admin" class="game-grid"></div>
        </section>

    </main>

    <div id="edit-user-modal" class="modal-overlay hidden"><div class="modal-content"><button id="close-user-modal" class="close-overlay-btn">&times;</button><h3>Editar Usuário</h3><form id="edit-user-form"><input type="hidden" id="edit-user-id"><div class="form-group"><label>Nome</label><input type="text" id="edit-user-name" required></div><div class="form-group"><label>Cargo</label><select id="edit-user-role" class="role-select" style="width:100%"><option value="user">Jogador</option><option value="host">Host</option><option value="admin">Admin</option></select></div><div class="modal-footer"><button type="button" id="delete-user-btn" class="submit-btn danger-btn">Excluir</button><div class="right-buttons"><button type="button" id="cancel-edit-btn" class="submit-btn secondary-btn">Cancelar</button><button type="submit" class="submit-btn primary-btn">Salvar</button></div></div></form></div></div>
    <div id="faq-modal" class="modal-overlay hidden"><div class="modal-content"><button id="close-faq-modal" class="close-overlay-btn">&times;</button><h3 id="faq-modal-title">Pergunta</h3><form id="faq-form"><input type="hidden" id="faq-id"><div class="form-group"><label>Pergunta</label><input type="text" id="faq-question" required></div><div class="form-group"><label>Resposta</label><textarea id="faq-answer" rows="4" required></textarea></div><div class="modal-footer"><button type="button" id="delete-faq-btn" class="submit-btn danger-btn hidden">Excluir</button><div class="right-buttons"><button type="button" id="cancel-faq-btn" class="submit-btn secondary-btn">Cancelar</button><button type="submit" class="submit-btn">Salvar</button></div></div></form></div></div>
    <div id="course-modal" class="modal-overlay hidden"><div class="modal-content large-modal"><button id="close-course-modal" class="close-overlay-btn">&times;</button><h3 id="course-modal-title">Curso</h3><form id="course-form" class="scrollable-form"><input type="hidden" id="course-id"><div class="form-group"><label>Título</label><input type="text" id="course-title" required></div><div class="form-group"><label>Descrição</label><textarea id="course-desc" rows="3"></textarea></div><div class="form-group"><label>Capa (URL)</label><input type="url" id="course-cover"></div><hr class="form-divider"><div class="form-group"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;"><label style="margin:0">Módulos</label><button type="button" id="add-module-btn" class="submit-btn small-btn secondary-btn">+ Módulo</button></div><div id="modules-container"></div></div><div class="modal-footer"><button type="button" id="delete-course-btn" class="submit-btn danger-btn hidden">Excluir</button><div class="right-buttons"><button type="button" id="cancel-course-btn" class="submit-btn secondary-btn">Cancelar</button><button type="submit" class="submit-btn">Salvar</button></div></div></form></div></div>

    <div id="create-game-modal" class="modal-overlay hidden">
        <div class="modal-content xl-modal" style="width: 1200px; max-width: 98vw; height: 90vh; display: flex; flex-direction: column;">
            <div class="modal-header">
                <h2 id="game-modal-title">Criar Novo Jogo</h2>
                <button id="close-create-game-modal" class="close-overlay-btn">&times;</button>
            </div>
            <form id="create-game-form" style="display: flex; flex-direction: column; flex: 1; overflow: hidden;">
                <input type="hidden" id="game-id">
                <div class="modal-body-scroll" style="flex: 1; display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; overflow-y: auto; padding: 1rem;">
                    
                    <div class="modal-col-left">
                        <h4 style="color: var(--secondary-color); border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px;">Informações</h4>
                        <div class="form-row"><div class="form-group"><label>Nome *</label><input type="text" id="new-game-name" required></div><div class="form-group"><label>Status</label><select id="new-game-status"><option value="available">Disponível</option><option value="paused">Pausado</option></select></div></div>
                        <div class="form-row"><div class="form-group"><label>Duração (Min)</label><input type="number" id="new-game-duration" required></div><div class="form-group"><label>Valor (R$)</label><input type="number" id="new-game-price" step="0.01" required></div></div>
                        <div class="form-group">
                            <label>Máx. Jogadores *</label>
                            <input type="number" id="new-game-max-players" required min="1" value="1" placeholder="Ex: 1 para exclusivo">
                            <small style="color:#aaa; font-size:0.8rem;">1 = Sessão Exclusiva</small>
                        </div>
                        <div class="form-group"><label class="upload-label" style="justify-content:flex-start; padding:10px;"><input type="checkbox" id="check-extra-life" style="width:auto;margin-right:10px;"> Possui Vida Extra?</label><div id="extra-life-config-container" class="hidden" style="margin-top:10px;"><label style="font-size:0.8rem;color:#aaa">Tempo Extra (Min)</label><input type="number" id="new-game-extra-life-time" placeholder="15"></div></div>
                        <div class="form-group" style="position:relative;"><label>Tags</label><div class="tags-input-container" id="tags-wrapper" onclick="document.getElementById('tag-input-field').focus()"><input type="text" id="tag-input-field" class="tag-input-field" placeholder="Digite..." autocomplete="off"></div><ul id="tags-suggestions" class="tags-suggestions-list"></ul></div>
                        <div class="form-group"><label>Descrição Curta</label><input type="text" id="new-game-short-desc"></div>
                        <div class="form-group"><label>Descrição Completa</label><textarea id="new-game-full-desc" rows="3"></textarea></div>
                        <h4 style="color: var(--secondary-color); border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; margin-top:20px;">Marketing</h4>
                        <div class="form-group"><label>Capa</label><div style="display:flex;gap:10px;"><div style="flex:1;"><input type="file" id="admin-cover-upload" accept="image/*" style="display:none;"><label for="admin-cover-upload" class="upload-label small-btn">Upload Capa</label><input type="text" id="new-game-cover" placeholder="URL" style="margin-top:5px;font-size:0.8rem;"></div><img id="admin-cover-preview" src="" style="width:60px;height:60px;object-fit:cover;border-radius:4px;display:none;background:#000;"></div></div>
                        <div class="form-group"><label>Galeria</label><input type="file" id="gallery-upload-input" multiple accept="image/*" style="display:none;"><label for="gallery-upload-input" class="upload-label small-btn">Adicionar Fotos</label><div id="gallery-preview-grid" class="gallery-grid" style="margin-top:5px;"></div></div>
                        <div class="form-group"><label>Teaser</label><label for="admin-trailer-upload" class="upload-label small-btn">Enviar Vídeo</label><input type="file" id="admin-trailer-upload" accept="video/*" style="display:none;"><input type="text" id="new-game-trailer" style="display:none;"></div>
                    </div>
                    
                    <div class="form-group">
                    <label style="color: var(--secondary-color); margin-bottom: 10px; display: block;">
        <ion-icon name="timer-outline"></ion-icon> Personalização do Timer
                    </label>

                    <div class="timer-config-section">
        <div class="timer-grid">
            <div>
                <label for="edit-timer-type">Modo de Contagem</label>
                <select id="edit-timer-type" class="admin-input" onchange="updateTimerPreview()">
                    <option value="regressive">Regressivo (Decrescente)</option>
                    <option value="progressive">Progressivo (Crescente)</option>
                </select>
            </div>

            <div>
                <label for="edit-timer-font">Estilo da Fonte</label>
                <select id="edit-timer-font" class="admin-input" onchange="updateTimerPreview()">
                    <option value="'Orbitron', sans-serif">Digital (Futurista)</option>
                    <option value="'Courier New', monospace">Máquina de Escrever</option>
                    <option value="sans-serif">Padrão (Clean)</option>
                    <option value="serif">Clássico (Serifa)</option>
                </select>
            </div>

            <div>
                <label for="edit-timer-color">Cor dos Números</label>
                <div style="display:flex; gap:10px; align-items:center;">
                    <input type="color" id="edit-timer-color" value="#ff0000" oninput="updateTimerPreview()" style="height:40px; width:60px; border:none; background:none; cursor:pointer;">
                    <span style="font-size:0.8rem; opacity:0.7;">Escolha a cor</span>
                </div>
            </div>
        </div>

        <div class="timer-preview-box">
            <span id="timer-preview-text" class="timer-preview-text">00:00</span>
        </div>
                    </div>

                    <div class="form-group">
    <label style="color: var(--secondary-color); margin-bottom: 10px; display: block;">
        <ion-icon name="git-branch-outline"></ion-icon> Gerenciador de Decisões
    </label>
    
    <div class="decision-creation-box">
        <input type="text" id="decision-question-input" class="admin-input" placeholder="Pergunta (Ex: Qual caminho seguir?)" style="margin-bottom:10px;">
        
        <div class="decision-options-grid">
            <input type="text" id="decision-opt-1" class="admin-input" placeholder="Alternativa A">
            <input type="text" id="decision-opt-2" class="admin-input" placeholder="Alternativa B">
            <input type="text" id="decision-opt-3" class="admin-input" placeholder="Alternativa C (Opcional)">
        </div>

        <button type="button" id="add-decision-btn" class="submit-btn small-btn" style="width:100%; margin-top:5px;">
            <ion-icon name="add-circle-outline"></ion-icon> Adicionar Decisão
        </button>

        <div style="margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;">
            <label style="font-size:0.85rem; color:#aaa; margin-bottom:10px; display:block;">Decisões Salvas:</label>
            <div id="decisions-list-container">
                </div>
        </div>
    </div>

                    <div class="modal-col-right" style="background: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 8px; border: 1px solid var(--border-color); display: flex; flex-direction: column;">
                        <h4 style="color: var(--secondary-color); border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px;">
                            <ion-icon name="layers-outline"></ion-icon> Mídias da Sessão
                        </h4>
                        <p class="form-hint" style="margin-bottom: 1rem;">Conteúdo que o Host envia aos jogadores (Pistas, Áudios, Vídeos).</p>
                        
                        <div style="background:var(--sidebar-bg); padding:1rem; border-radius:6px; border:1px dashed #444; margin-bottom:1rem;">
                            <div class="form-group">
                                <label>Nome da Mídia</label>
                                <input type="text" id="asset-name-input" placeholder="Ex: Áudio do Fantasma">
                            </div>
                            
                            <label style="font-size: 0.9rem; margin-bottom: 5px; display: block; color: var(--text-color-light);">Selecione o Tipo:</label>
                            
                            <div class="upload-type-grid">
                                <input type="file" id="upload-asset-image" accept="image/png, image/jpeg, image/jpg, image/gif" style="display:none;">
                                <label for="upload-asset-image" class="type-btn" title="Enviar Imagem">
                                    <ion-icon name="image-outline"></ion-icon> <span>Foto</span>
                                </label>

                                <input type="file" id="upload-asset-video" accept="video/mp4, video/webm" style="display:none;">
                                <label for="upload-asset-video" class="type-btn" title="Enviar Vídeo">
                                    <ion-icon name="videocam-outline"></ion-icon> <span>Vídeo</span>
                                </label>

                                <input type="file" id="upload-asset-audio" accept="audio/mp3, audio/wav, audio/mpeg, audio/ogg" style="display:none;">
                                <label for="upload-asset-audio" class="type-btn" title="Enviar Áudio">
                                    <ion-icon name="musical-notes-outline"></ion-icon> <span>Áudio</span>
                                </label>
                            </div>

                            <div id="selected-file-display" class="hidden" style="margin-top: 10px; padding: 8px; background: rgba(0,255,136,0.1); border-radius: 4px; font-size: 0.85rem; display: flex; align-items: center; justify-content: space-between;">
                                <span id="asset-filename-text" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">Arquivo.mp3</span>
                                <button type="button" id="clear-asset-selection" style="background:none; border:none; color: #ff4f4f; cursor: pointer;">&times;</button>
                            </div>

                            <button type="button" id="add-asset-btn" class="submit-btn small-btn secondary-btn" style="width: 100%; margin-top: 10px;" disabled>
                                <ion-icon name="cloud-upload-outline"></ion-icon> Adicionar à Lista
                            </button>
                            <span id="assets-upload-status" class="form-hint" style="text-align: center; margin-top: 5px; display: block;"></span>
                        </div>

                        <div style="flex:1; overflow-y:auto; border:1px solid #333; border-radius:6px; background:var(--sidebar-bg);">
                            <div id="assets-crud-list" class="crud-list">
                                <p style="padding:10px;text-align:center;opacity:0.5;">Nenhuma mídia adicionada.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer"><button type="button" id="delete-game-btn" class="submit-btn danger-btn hidden">Excluir Jogo</button><div class="right-buttons"><button type="button" id="cancel-create-game-btn" class="submit-btn secondary-btn">Cancelar</button><button type="submit" id="save-game-submit-btn" class="submit-btn">Salvar</button></div></div>
            </form>
        </div>
    </div>

    <div id="agenda-modal" class="modal-overlay hidden">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Agenda: <span id="agenda-game-name" style="color:var(--secondary-color)"></span></h2>
                <button id="close-agenda-modal" class="close-overlay-btn">&times;</button>
            </div>
            <div class="modal-body-scroll">
                <div class="tab-buttons" style="margin-bottom: 1rem;">
                    <button type="button" class="tab-btn active" id="tab-calendar-view">Calendário</button>
                    <button type="button" class="tab-btn" id="tab-bulk-add">Em Massa</button>
                </div>

                <div id="schedule-view-calendar">
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <button type="button" id="admin-prev-month" class="month-nav-btn"><ion-icon name="chevron-back"></ion-icon></button>
                            <h4 id="admin-month-header">Janeiro 2026</h4>
                            <button type="button" id="admin-next-month" class="month-nav-btn"><ion-icon name="chevron-forward"></ion-icon></button>
                        </div>
                        <div class="calendar-weekdays"><div>Dom</div><div>Seg</div><div>Ter</div><div>Qua</div><div>Qui</div><div>Sex</div><div>Sáb</div></div>
                        <div id="admin-calendar-grid" class="calendar-grid"></div>
                    </div>
                    
                    <div id="single-day-editor" class="hidden">
                        <h4>Horários para <span id="editing-date-display" style="color:var(--secondary-color);"></span></h4>
                        <div id="single-day-slots" style="display:flex;flex-wrap:wrap;gap:0.5rem;margin:10px 0;"></div>
                        <div style="display:flex; gap:10px;">
                            <select id="single-time-input" style="flex:1; padding:0.5rem; border-radius:5px; background:var(--bg-color); color:#fff; border:1px solid #444;"></select>
                            <button type="button" id="add-single-time-btn" class="submit-btn small-btn">+</button>
                        </div>
                        <div style="display:flex;gap:10px;margin-top:15px;justify-content:flex-end;">
                            <button id="clear-day-btn" class="submit-btn danger-btn small-btn">Limpar Dia</button>
                            <button id="save-single-day-btn" class="submit-btn small-btn">Salvar Dia</button>
                        </div>
                    </div>
                </div>

                <div id="schedule-view-bulk" class="hidden">
                    <div class="form-group"><label>Período</label><div style="display:flex;gap:10px;"><input type="date" id="bulk-start-date"><input type="date" id="bulk-end-date"></div></div>
                    <div class="form-group"><label>Dias</label><div style="display:flex;gap:5px;flex-wrap:wrap;"><label><input type="checkbox" value="0" checked> Dom</label><label><input type="checkbox" value="1" checked> Seg</label><label><input type="checkbox" value="2" checked> Ter</label><label><input type="checkbox" value="3" checked> Qua</label><label><input type="checkbox" value="4" checked> Qui</label><label><input type="checkbox" value="5" checked> Sex</label><label><input type="checkbox" value="6" checked> Sáb</label></div></div>
                    <div class="form-group"><label>Horários</label><div style="display:flex;gap:5px;"><select id="bulk-time-input" style="flex:1;padding:5px;border-radius:5px;background:var(--bg-color);color:#fff;border:1px solid #444;"></select><button type="button" id="add-bulk-time-btn" class="submit-btn small-btn">Add</button></div></div>
                    <div id="bulk-times-list" style="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem;min-height:40px;border:1px dashed var(--border-color);padding:5px;"></div>
                    <button type="button" id="apply-bulk-schedule-btn" class="submit-btn primary-btn" style="width:100%">Aplicar Agenda</button>
                </div>
            </div>
        </div>
    </div>

    <div id="delete-confirm-modal" class="modal-overlay hidden" style="z-index: 3000;">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <ion-icon name="warning-outline" style="font-size: 3rem; color: #ff4f4f;"></ion-icon>
            <h3 style="color: #ff4f4f;">Excluir Jogo?</h3>
            <p>Digite o nome do jogo para confirmar:</p>
            <strong id="delete-game-name-display" class="delete-confirmation-highlight"></strong>
            <input type="text" id="delete-verification-input" placeholder="Digite o nome aqui" class="form-group">
            <div class="modal-footer" style="justify-content: center; gap: 10px; padding-top: 0; border: none;">
                <button id="cancel-delete-modal-btn" class="submit-btn secondary-btn">Cancelar</button>
                <button id="confirm-delete-action-btn" class="submit-btn danger-btn" disabled>Excluir</button>
            </div>
        </div>
    </div>

    <div id="game-sessions-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Sessões: <span id="sessions-game-name" style="color:var(--secondary-color)"></span></h2>
                <button id="close-sessions-modal" class="close-overlay-btn">&times;</button>
            </div>
            
            <div class="modal-body-scroll">
                <p class="form-hint" style="margin-bottom: 1rem;">Abaixo estão os agendamentos futuros para este jogo.</p>
                
                <div id="game-sessions-list" class="bookings-list">
                    <div class="loader"></div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="close-sessions-btn" class="submit-btn secondary-btn" style="width: 100%;">Fechar</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="assets/js/firebase-config.js"></script>
    <script>
        loadAsset('assets/css/style.5732ff61.css');
        loadAsset('https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js');
        loadAsset('https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js');
        loadAsset('assets/js/admin.5732ff61.js');
    </script>
</body>
</html>