<!DOCTYPE html>
<html lang="pt-br" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - PlayU</title>
    <script src="assets/js/version.ed1c03a0.js"></script>
    <script>
        function loadAsset(path) {
            const version = typeof SITE_VERSION !== 'undefined' ? SITE_VERSION : new Date().getTime();
            const extension = path.split('.').pop();
            if (extension === 'css') {
                document.write(`<link rel="stylesheet" href="${path}?v=${version}">`);
            } else if (extension === 'js') {
                document.write(`<script src="${path}?v=${version}" defer><\/script>`);
            }
        }
    </script>
</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <h1 class="logo">Painel Admin</h1>
            <div class="user-menu">
                <span id="user-greeting">Olá, Admin</span>
                <a href="dashboard.html" class="submit-btn small-btn">Ir para Dashboard</a>
                <button id="logout-btn" class="submit-btn small-btn danger">Sair</button>
            </div>
        </div>
    </header>

    <main class="dashboard-main">
        
        <section id="user-management" class="dashboard-section">
    <div class="section-header">
        <h2>Gerenciamento de Usuários</h2>
        
        <div class="search-box">
            <ion-icon name="search-outline"></ion-icon>
            <input type="text" id="user-search-input" placeholder="Buscar por nome ou email...">
        </div>
    </div>

    <div class="table-container">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Cargo (Role)</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="user-table-body">
                <tr><td colspan="4"><div class="loader"></div></td></tr>
            </tbody>
        </table>
    </div>
</section>

        <section id="game-management" class="dashboard-section">
            <div class="section-header">
                <h2>Gerenciamento de Jogos</h2>
                <button id="open-create-game-modal-btn" class="submit-btn">
                    <ion-icon name="add-circle-outline"></ion-icon> Adicionar Novo Jogo
                </button>
            </div>
            <div id="game-list-container" class="bookings-list"></div>
        </section>

    </main>

    <div id="edit-user-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-user-modal" class="close-overlay-btn">&times;</button>
            <h3>Editar Usuário</h3>
            <form id="edit-user-form">
                <input type="hidden" id="edit-user-id">
                <div class="form-group">
                    <label for="edit-user-name">Nome de Exibição</label>
                    <input type="text" id="edit-user-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-user-role">Cargo</label>
                    <select id="edit-user-role" class="role-select" style="width: 100%">
                        <option value="user">Jogador</option>
                        <option value="host">Host</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" id="delete-user-btn" class="submit-btn danger-btn">
                        <ion-icon name="trash-outline"></ion-icon> Excluir
                    </button>
                    <div class="right-buttons">
                        <button type="button" id="cancel-edit-btn" class="submit-btn secondary-btn">Cancelar</button>
                        <button type="submit" class="submit-btn primary-btn">Salvar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div id="create-game-modal" class="modal-overlay hidden">
        <div class="modal-content large-modal">
            <button id="close-create-game-modal" class="close-overlay-btn">&times;</button>
            
            <h3 id="game-modal-title">Criar Novo Jogo</h3>
            <p id="game-modal-subtitle">Preencha as informações do jogo.</p>
            
            <form id="create-game-form" class="scrollable-form">
                <input type="hidden" id="game-id-hidden">

                <div class="form-row">
                    <div class="form-group">
                        <label for="new-game-name">Nome do Jogo *</label>
                        <input type="text" id="new-game-name" required placeholder="Ex: A Lenda de PlayU">
                    </div>
                    <div class="form-group">
                        <label for="new-game-status">Status *</label>
                        <select id="new-game-status" required>
                            <option value="available">Disponível</option>
                            <option value="paused">Pausado (Manutenção/Cheio)</option>
                            <option value="draft">Rascunho (Oculto)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="new-game-duration">Duração Média *</label>
                        <input type="text" id="new-game-duration" required placeholder="Ex: 90 minutos">
                    </div>
                    <div class="form-group">
                        <label for="new-game-tags">Tags / Gênero *</label>
                        <input type="text" id="new-game-tags" required placeholder="Ex: RPG, Terror (separados por vírgula)">
                    </div>
                </div>

                <div class="form-group">
                    <label for="new-game-short-desc">Descrição Curta (Vitrine) *</label>
                    <input type="text" id="new-game-short-desc" required placeholder="Uma frase resumo">
                </div>

                <div class="form-group">
                    <label for="new-game-full-desc">Descrição Completa *</label>
                    <textarea id="new-game-full-desc" rows="4" required placeholder="Detalhes da história..."></textarea>
                </div>

                <div class="form-group">
                    <label for="new-game-cover">Imagem de Capa (URL) *</label>
                    <input type="url" id="new-game-cover" required placeholder="https://...">
                </div>

                <div class="form-group">
                    <label for="new-game-gallery">Galeria (URLs separadas por vírgula)</label>
                    <textarea id="new-game-gallery" rows="2" placeholder="https://img1.com, https://img2.com"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="new-game-trailer">Trailer (URL Opcional)</label>
                    <input type="url" id="new-game-trailer" placeholder="https://youtube.com/...">
                </div>

                <div class="modal-footer">
                    <button type="button" id="go-to-media-btn" class="submit-btn secondary-btn hidden">
                        <ion-icon name="images-outline"></ion-icon> Gerenciar Arquivos de Mídia
                    </button>

                    <div class="right-buttons">
                        <button type="button" id="cancel-create-game-btn" class="submit-btn secondary-btn">Cancelar</button>
                        <button type="submit" id="save-game-submit-btn" class="submit-btn primary-btn">Criar Jogo</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

    <script src="assets/js/firebase-config.js"></script>
    <script>
        loadAsset('assets/css/style.ed1c03a0.css');
        loadAsset('https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js');
        loadAsset('https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js');
        loadAsset('assets/js/admin.ed1c03a0.js');
    </script>
</body>
</html>